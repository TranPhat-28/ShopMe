<!doctype html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <title>ShopMe</title>
        <link
            href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0/dist/css/bootstrap.min.css"
            rel="stylesheet"
            integrity="sha384-gH2yIJqKdNHPEq0n4Mqa/HGKIhSkIHeL5AyhkYV8i59U5AR6csBvApHHNl/vI1Bx"
            crossorigin="anonymous">
        <link rel="stylesheet" href="/css/admin.css">
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css">
    </head>
    <body style="background-color: grey;">
        <!--Header - Navbar-->
        <nav class="navbar navbar-dark bg-dark navbar-expand-lg py-3">
            <div class="container">
                <a class="navbar-brand" href="#">ShopMe</a>
                <ul class="navbar-nav ms-auto">
                    <li class="nav-item">
                        <!--Use a form to send POST to log out-->
                        <form action="/logout?_method=DELETE" method="POST">
                            <button type="submit" class="btn nav-link">Log out</button>
                        </form>
                    </li>
                </ul>
            </div>
        </nav>

        <!--Body outermost container-->
        <div class="container" style="background-color: white;">
            <!--Heading-->
            <h2 class="pt-3">Edit a product</h2>
            <p class="pb-3 ps-3">Here you can edit product information</p>

            <!--Container for the content-->
            <div class="container mt-3">
                <div class="row">
                    <div class="col-sm-12 col-md-8 p-3">
                        <div class="col-12">
                            <div class="container border rounded p-3 mb-5">
                            <!--Form for searching product-->
                                <div>
                                    <input type="text" id="findProduct" class="form-control" placeholder="Search product name or ID here..." required><br>
                                    <input type="button" class="btn btn-primary" value="Search by name" onclick="searchName()">
                                    <input type="button" class="btn btn-secondary" value="Search by ID" onclick="searchID()">
                                </div>
                            </div>
                        </div>

                        <div class="container border rounded p-3">
                            <!--Form-->
                            <form action="/admin/editProduct" method="post">
                                <input type="hidden" name="productID" class="form-control"><br>

                                <label for="productName" class="form-label m-1">Product name</label><br>
                                <input type="text" name="productName" class="form-control" required><br>

                                <label for="description" class="form-label m-1">Description</label><br>
                                <input type="text" name="description" class="form-control" required><br>

                                <label for="price" class="form-label m-1">Price</label><br>
                                <input type="number" name="price" class="form-control" required><br>

                                <label for="quantity" class="form-label m-1">Amount / Quantity</label><br>
                                <input type="number" name="quantity" class="form-control" required><br>

                                <label for="category" class="form-label m-1">Category</label><br>
                                <select name="category" class="form-control" required>
                                    <option value="Electronics">Electronics</option>
                                    <option value="Healthcares">Healthcares</option>
                                    <option value="Tools">Tools</option>
                                    <option value="Lifestyles">Lifestyles</option>
                                    <option value="Clothings">Clothings</option>
                                    <option value="Accessories">Accessories</option>
                                    <option value="Cosmetics">Cosmetics</option>
                                    <option value="Shoes">Shoes</option>
                                </select><br>

                                <input type="submit" class="btn btn-primary" value="Update product">
                            </form>
                        </div>
                    </div>
        
                    <!--Menu-->
                    <div class="col-sm-12 col-md-4 p-3">
                        <div class="container border rounded p-3">
                            <h3 class="mb-4">Administrator Panel</h3>
        
                            <ul class="list-group">
                                <li class="list-group-item">
                                    <a class="nav-link" href="/admin/orders">Orders</a>
                                </li>
                                <li class="list-group-item" aria-current="true">
                                    <a class="nav-link" href="/admin/customersAndProducts">Customers and Products</a>
                                </li>
                                <li class="list-group-item">
                                    <a class="nav-link" href="/admin/addProduct">Add a new product</a>
                                </li>
                                <li class="list-group-item active">
                                    <a class="nav-link active" href="#">Edit a product</a>
                                </li>
                                <li class="list-group-item">
                                    <a class="nav-link" href="/admin/report">User report</a>
                                </li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        

        <!--JAVASCRIPT-->
        <script
            src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0/dist/js/bootstrap.bundle.min.js"
            integrity="sha384-A3rJD856KowSb7dwlZdYEkO39Gagi7vIsF0jrRAoQmDKKtQBHUuLZ9AsSv4jD4Xa"
            crossorigin="anonymous"></script>
        <script
            src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.5/dist/umd/popper.min.js"
            integrity="sha384-Xe+8cL9oJa6tN/veChSP7q+mnSPaj5Bcu9mPX5F5xIGE0DVittaqT5lorf0EI7Vk"
            crossorigin="anonymous"></script>
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
        <script>

            function searchName(){
                var obj = {
                    'find': $('#findProduct').val(),
                };

                $.ajax({
                    url: '/admin/searchEditName',
                    method: 'POST',
                    data:obj,
                    success: function(data) {
                        // SUCCESS
                        if (data === 'No result'){
                            window.alert(data)
                        }
                        else{
                            $('input[name=productID]').val(data.productID);
                            $('input[name=productName]').val(data.productName);
                            $('input[name=description]').val(data.productDesc);
                            $('input[name=price]').val(data.productPrice);
                            $('input[name=quantity]').val(data.productQuantity);
                            $('select[name=category]').val(data.productCategory);
                        }
                    },
                    error: function(data) {
                        // FAILED
                        console.log('Failed info :' + data);
                    }
                });
            }


            function searchID(){
                var obj = {
                    'find': $('#findProduct').val(),
                };

                $.ajax({
                    url: '/admin/searchEditID',
                    method: 'POST',
                    data:obj,
                    success: function(data) {
                        // SUCCESS
                        if (data === 'No result'){
                            window.alert(data)
                        }
                        else{
                            $('input[name=productID]').val(data.productID);
                            $('input[name=productName]').val(data.productName);
                            $('input[name=description]').val(data.productDesc);
                            $('input[name=price]').val(data.productPrice);
                            $('input[name=quantity]').val(data.productQuantity);
                            $('select[name=category]').val(data.productCategory);
                        }
                    },
                    error: function(data) {
                        // FAILED
                        console.log('Failed info :' + data);
                    }
                });
            }
        </script>
    </body>
</html>